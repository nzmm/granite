{% extends "admin/change_form.html" %}
{% load i18n admin_urls %}
{% block object-tools-items %}
    <li>
        <a href="{% url opts|admin_urlname:'history' original.pk|admin_urlquote %}" class="historylink">{% trans "History" %}</a>
    </li>
    <li>
        <a href="#edit" class="historylink">Edit template markup</a>
    </li>
    {% if has_absolute_url %}
        <li>
            <a href="{% url 'admin:view_on_site' content_type_id original.pk %}" class="viewsitelink">{% trans "View on site" %}</a>
        </li>
    {% endif %}
{% endblock %}

{% block admin_change_form_document_ready %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.min.js" type="text/javascript" charset="utf-8"></script>
    <script>
        (function() {
            var editor = ace.edit("g-template-editor");
            //editor.getSession().setMode("ace/mode/html");

            editor.on("change", function(e) {
                console.log(e);
                document.getElementById('id_markup').value = editor.getValue();
            });
        })();
    </script>

    {{ block.super }}
{% endblock %}
